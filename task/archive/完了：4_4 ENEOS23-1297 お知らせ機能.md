[ENEOS23-1297](https://vqit.backlog.com/view/ENEOS23-1297)
# 進捗とENEOSの比較
## 一致
### model
- `notification.rb`
### controller
- `/admin/notifications_controller.rb`
	- 管理画面からお知らせの登録・編集・削除を行う。
- `/notifications_controller.rb`
	- ユーザー画面でおしらせ表示を行う。

## 不一致
### controller

## 確認できたこと
- ENEOS側でも管理画面はお知らせの登録ができ、画面にも表示される
![スクリーンショット 2025-04-04 14.21.12.png](../_resources/スクリーンショット%202025-04-04%2014.21.12.png)
- `controllerがあることは確認済み`



![スクリーンショット 2025-04-04 17.30.21.png](../_resources/スクリーンショット%202025-04-04%2017.30.21.png)

![スクリーンショット 2025-04-04 17.29.30.png](../_resources/スクリーンショット%202025-04-04%2017.29.30.png)

# 山邊さんに確認すること
- 現在、堺と川崎でホーム画面が異なるが、どの部分にお知らせを表示するか？
	- 簡単なものを提示
- どのタイミングでお知らせ機能を復活させるか？
- BE、FEそれぞれどれくらいの工数がかかるか見積もりが必要


- 画面が違います
- 違うことによって工数がかかります。
- 堺は画面設計書から作成するので、時間がかかると思います。
	- figmaはVQのデザイナーさんに用意してもらう必要が出てくる？
- 川崎、鹿島、水島に関しては、これまで通りTOPに表示させるでよいですか？
	- 


左サイドメニューでよいのでは？
重要なものはポップアップ

4月の工数で対応できそうか。
-> 調整次第、後ほど回答いたします。


root




# 04/14 確認事項
- [x] おしらせ機能実装の本番デプロイは5/1で問題ないか
- [ ] ドキュメント今週完了、来週から実装でスケジュール問題ないか
- [x] ドキュメント作成にあたり対象となる画面は以下でよいか
	- ユーザー画面
		- [x] サイドバー
		- [x] 一覧
		- [x] 詳細
		- [x] 未読一覧
			- 今後表示しないにチェックいれたら表示されない。
			- 一覧を表示するだけで、詳細には飛べない。
			- スクロール可能で「今後表示しない」にチェックされていないものはすべて表示する
	- 管理画面
		- [x] 登録
		- [x] 編集
		- [x] 削除モーダル
		- [x] 一覧（ユーザー向け）
		-  ~~HOME~~
		- [x] 一覧（管理向け）


# 管理ユーザー向けにお知らせを表示する
`app/controllers/notifications_controller.rb`
scopeを追加する。
current_user.office_roles.roleで2と3のユーザーだけを対象にするスコープを作成して表示プラスして表示させる。


# 画面仕様書作成
- STEP：4
## 確認事項
- フォルダどうする？
	- 管理画面
	- サイドバー
- 画面IDどうする？
- どこまでつくるか。
	- サイドバー...複数の種類がある
- 管理画面
	- 他の機能ある。どうするか？
 
### 画面仕様書作成方針
### ルール
- 1画面（1URL）で1ファイル
- 画面IDはSTEP3、STEP4の頭文字を取っていそうだが、定修に関係ないものはどういう頭文字にするか
### 作成対象
##### 管理
- [x] システム管理
- [x] お知らせ一覧
	- [x] 削除モーダル
- [x] お知らせ新規登録
- [x] お知らせ編集
##### ユーザー
- [x] お知らせ一覧
- [x] お知らせ詳細
- [x] 未読お知らせ一覧
##### 共通コンポーネント
- [x] サイドバー


# 実装
## TODO
- [x] サイドバーに「お知らせ」追加
	- [x] 未読数のカウントAPI
- [x] 管理画面_お知らせ一覧のバグ修正
- [x] 削除時のフラッシュメッセージ不具合修正

# dev検証
- [x] 堺
- [x] 川崎
- [x] 鹿島
- [x] 水島


# STG検証
- [ ] 堺
- [x] 川崎
- [x] 鹿島
- [ ] 水島 