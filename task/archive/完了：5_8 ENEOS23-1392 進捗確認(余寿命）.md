SD-Bの余寿命テーブルは既にあるものと思われますが、どれでしょうか。

簡易、詳細示切り替え
→日本語が分からないため、ご教授いただきたいです。
> ※うすオレンジはうす緑を非表示にしてもスクロールする場合に非表示
→簡易表示にしたら、緑とオレンジの両方を非表示にするということでしょうか。

並び替え
余裕があればという認識でお間違いないでしょうか。

機器リンク
画面上に「機器リンク」の表示がありませんが、リンクを挿入するという認識でよいでしょうか。
そうなるとどこにUIを挿入いたしますか？



TODO
- [x] 以下API実装
	- [x] エリア、機器、法規の追加
	- [x] デフォルトの並び順（エリア > 機器 > 部位 > アルファベット昇順）
```
GET 
https://dev.valqua-spm.com/api/daily_maintenance/offices/45/sdm_inspection_report_life_estimates
```
- [ ] CSVエクスポート
- [ ] フィルター
	- [x] フリーワード検索
	- [x] 日付検索
	- [ ] 範囲検索：数値



## 項目
- [x] エリア `sdm_model_number.daily_maintenance_areas.name`
- [x] 機器 `sdm_model_number.maintenance_model_number.name || sdm_model_number.custom_name`
- [x] 測定部位：`sdm_model_number.sdm_inspection_points.custom_name`
- [x] 法規（シェル側）：`maintenance_model_number.legal_1`
- [x] 法規（チャンネル側）：`maintenance_model_number.legal_2`
- 機器仕様
	- [x] 材質 `material`
	- [ ] SIZE `size`
	- [x] 元厚 `original_thickness`
	- [x] MAT `mat`
	- [x] 使用開始年 `start_use_date`
	- [x] 使用年数 `use_years`
- 今回測定値
	- [x] 近傍肉厚 `nearby_thickenss`
	- [ ] 腐食深さ `erosion_depth`
	- [x] 残肉厚 `remaining_thickness`
- 前回測定値
	- [x] 前回測定日 `previous_inspection_date`
	- [x] 残肉厚 `previous_remaining_assessment`
- [x] 余寿命8年以下閾値 `life_estimate_assessment`
- [x] 長期CR `long_cr`
- [x] 短期CR `short_cr`
- マニュアル
	- [x] CR `manual_cr`
	- [x] コメント `manual_comment`
- [x] 余寿命 `life_estimate`
- [x] 寿命到達年 `life_reach_date`
- [x] 係数α `coefficient`
- [x] 係数X余寿命 `value`
- [x] 備考 `note`

![スクリーンショット 2025-05-12 10.28.26.png](../_resources/スクリーンショット%202025-05-12%2010.28.26.png)

### 検索フィルター
- 全項目
- 数値
	- 範囲検索
- 日付：カレンダーで範囲指定検索
	- 使用開始年
	- 前回測定日
	- 寿命到達年
- テキスト部分一致検索
	- エリア
	- 機器
	- 測定部位
	- 法規
	- 材質
	- コメント
	- 備考
 
#### 疑問点
日付はフリーワードとしてransackで定義するのか？
→ フロントで入力を日付形式にしてフリーワードとして処理？



# STG検証 Feedback
### 後検　＞写真一覧下の登録情報テーブル：入力欄がプルプルします。（スクショでは取得できません）
全画面ブラウザ100%表示で発生
90%,110%に変更や、全画面解除で解消されるが、全画面100%に再設定+別タブに移動後に戻ってくる等で再発
→バグ。ただ、本チケットは余寿命タブの作成であるため、検査記録>後検査のバグは対応範囲ではない認識。

### 後検タブ：余寿命の備考欄に入力→保存で情報が削除される
余寿命一覧には反映されるが、連番され複製される（_001の備考欄入力・保存で002が作成される）
→ バグ。画面としては本チケットの対応範囲ではないと思われるが、serializerの追加など実装の影響範囲である可能性がある。

### 測定部位に連番が付与されていない
→ バグ。本チケットの対応範囲かは、不明。serializerの修正による影響であるなら対応範囲だが、既存実装によるものである可能性もある。

### すべての案件での余寿命一覧が表示されている
→ 仕様変更。仕様が明確でなかったため、どの条件で一覧を表示するのか不明。

### 更新すると（フィルターソート後も）KEY工程タブの情報が表示される。
→ 仕様変更？（本来そうあるべきな範疇かもしれない）リロード時に、KEY工程タブに移動する。余寿命タブを維持したい。

## ①、④、⑤の修正。子チケットとして対応する。
①、⑤は修正するだけ。
④については、一覧表示の仕様を確認してから対応。



