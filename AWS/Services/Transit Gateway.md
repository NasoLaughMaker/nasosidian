複数のVPCや複数のオンプレミスネットワークを相互に接続するハブ機能を持つサービス。

## VPCピアリングとの違い

- VPCピアリングは1対1なのに対して、複数のVPC同士をひとつのハブで相互に接続できる。

## Transit Gatewayアタッチメント

Transit Gatewayが接続するリソースの窓口の総称

- VPCアタッチメント
    - 対象：VPC
    - ENI
        - ENIを作成する際にはTGW用のプライベートサブネットを作成することが推奨されている。
        - 一つのプライベートサブネット内でENIを作成し、ルートテーブルに定義をしたらVPC全体でTGWを使用可能。
- Direct Connecアタッチメント
    - 対象：オンプレミス
    - Direct Connect Gateway
- Site-to-Site VPNアタッチメント
    - 対象：オンプレミス
    - カスタマーゲートウェイ
- Peeringアタッチメント
    - 対象：他リージョンのTGW
    - TGW同士の直接接続
- Outpostアタッチメント
    - 対象：AWS Outposts（オンプレのAWS環境）
    - OutpostsのネットワークをTGWに接続

## アプライアンスモード
#### 目的
- Transit Gatewayに接続された複数のVPC間のトラフィックを、特定の仮想アプライアンス（セキュリティ装置など）を経由させることで、セキュリティを一元的に適用し、高可用性を確保する。
#### 問題点
- 通常、Transit Gatewayは、ハッシュベースのルーティング（ECMP）により、トラフィックを複数のパスに分散させる。仮想アプライアンスが複数台あり*、ECMPでトラフィックを分散させると、通信セッションが途中で異なるアプライアンスに転送されてしまい、セッションが切断される可能性がある。これは、ステートフルなセキュリティ装置（ファイアウォールなど）にとって致命的。
#### 機能
- 特定の仮想アプライアンスへのトラフィックを常に同じパスに固定する。
  - セッションの切断を防ぎ、一貫したセキュリティポリシーを適用
- プライマリーとセカンダリーの仮想アプライアンス間でフェイルオーバーをサポート
#### Config
- VPCアタッチメントのルーティングテーブルに、アプライアンスが稼働するサブネットのルートを登録。このアタッチメントに対して