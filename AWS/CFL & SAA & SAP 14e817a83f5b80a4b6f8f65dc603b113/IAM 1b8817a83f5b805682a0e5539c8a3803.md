# IAM

- IAMユーザー
    - 人間やアプリケーションに対して割り当てられるAWS内のエンティティ。アクセスキーとパスワードが含まれる。
- IAMグループ
    - IAMユーザーをまとめるための単位。グループに付与したポリシーが継承。
- IAMロール
    - 特定の信頼されたエンティティにアクセス権を付与する仕組み。認証情報を持たず、一時的なセッションを通してアクセスする。
    - クロスアカウントアクセス
        - IAMロールに対して信頼ポリシーを設定することで、他のAWSアカウントやAWSサービスがそのロールに割り当てられた権限を一時的に使用できるようになる。

## ポリシー

- AWSリソースへのアクセスを制御するルールを定義したドキュメント。AWSではJSON形式で記述される。インラインと管理の2種類がある。
- インラインポリシー
    - 特定のユーザー専用に埋め込むポリシー。IAMエンティティ(IAMユーザー、IAMグループ、IAMロール)に直接埋め込む形で適用する。ポリシー単体では作成できず、エンティティと1:1の関係。他のエンティティには再利用できない。
- 管理ポリシー
    - 複数のユーザーに埋め込むポリシー
    - AWS管理ポリシー
        - AWSが提供する標準的なポリシー。再利用性が高く、設定が簡単。
    - カスタマー管理ポリシー
        - ユーザーが独自に作成したポリシー。

### 補足：ポリシーの記述方法には以下の2種類がある。

- 許可ポリシー
    - 一般的。リソースへのアクセスを許可する。(Effect: “Allow”)
- デナイポリシー
    - まれに使用。特定の条件でアクセスを拒否する。(Effect: “Deny”)

## AWS IAM Identity Center

- 複数のAWSアカウントやアプリケーションへのアクセスを効率的に一元管理するためのサービス。Organizationsと組み合わせて使用することが推奨されている。
- SAMLを使用したフェデレーション（SSOを実現する技術）をサポート。
    - SAML
        - セキュリティ認証情報を交換するためのXMLベースの標準フォーマット

## プリンシパルエンティティ

- IAM
    - IAMユーザー、IAMグループ、IAMロール
- AWSサービス
    - EC2、Lambda、R
- 外部アカウント
    - 他のAWS垢のIAMユーザーやIAMロール、Federated User(外部で認証されたユーザー)

## クロスアカウントアクセス

[https://qiita.com/aki3061/items/865957c03a41f556eaec](https://qiita.com/aki3061/items/865957c03a41f556eaec)