

## AD Connector

オンプレのADをそのまま利用できる。連携が必要なため、VPNやDXを用いたネットワークの接続が必要。

- 可用性を考慮し、最低でも2つのブライベートサブネットに設置する。ルートテーブルで定義すれば、1つVPC全体と通信可能。

## Simple AD

最大5000ユーザー。Managed Microsoft AD の下位互換。

## AWS Managed Microsoft  AD

以下に対応

- 5000を超えるユーザー
- 他ドメインとの信頼関係
- MFA

### オンプレADや他リージョンADと連携して利用する場合

- オンプレAD
    - Managed Microsoft ADとオンプレADを信頼関係で統合
- 他リージョン
    - 2つのリージョンでそれぞれManaged Microsoft ADをデプロイし、信頼関係を設定する。
        - この方法ではディレクトリのデータは自動で同期されない。
    - 複数のリージョンにまたがる「プライマリ&レプリカ」構成を利用
        - 1つのリージョンにプライマリディレクトリを作成し、他リージョンにレプリカディレクトリを作る。これにより、ディレクトリデータが自動的に同期される。

| **要件** | **AD Connector** | **Managed Microsoft AD** | **信頼関係** |
| --- | --- | --- | --- |
| AWSでオンプレADをそのまま使いたい | ✅ 必要 | ❌ 不要 | ❌ 不要 |
| AWS内で独立したADを使いたい | ❌ 不要 | ✅ 必要 | ❌ 不要 |
| AWSのADとオンプレADを統合したい | ❌ 不要 | ✅ 必要 | ✅ 必要 |
| 複数リージョンでADを統合したい | ❌ 不要 | ✅ 必要 | ✅（信頼関係）or ✅（マルチリージョンレプリケーション） |

## Resource Access Managerの設定が必要な場合

**前提**：アカウントが異なる場合は、いかなる条件でもRAMの設定が必要

### 信頼関係のみで完結するユースケース

- 同じアカウント内で異なるリージョンのADを使用する
    - ユーザー認証やリソースへのアクセスのみ

### RAMの設定まで必要なユースケース

- 同じアカウント内で異なるリージョンのリソースとADを統合する
    - サービスとADを統合する必要がある
- Organizationsを使用せず、他アカウントとADを共有
- Organizations内のアカウントとADを共有